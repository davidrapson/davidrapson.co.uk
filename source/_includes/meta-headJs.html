<script id="script-config">
    window.Config = {
        isModern: (
            'querySelector' in document &&
            'localStorage' in window &&
            'addEventListener' in window &&
            'withCredentials' in new XMLHttpRequest()
        )
    };
</script>
<script id="script-usertime">
    {% include markUserTime.js %}
</script>
<script src="https://use.typekit.net/bem2aeh.js"></script>
<script id="script-setup">
    {% include fontFaceObserver.js %}

    (function(isModern) {
        var docEl = document.documentElement;
        var classes = ['js'];

        /**
         * Loads web-fonts using FontFaceObserver
         *
         * Minimises Flash of Faux Text (FOFT) by storing
         * loaded preference in localStorage and adding
         * a fonts-loaded class earlier if we think the
         * fonts are already cached.
         */
        function loadFonts() {
            var fontsLoaded = false;
            var fontClass = 'fonts-loaded';

            var observerBody = new FontFaceObserver('ff-meta-web-pro');
            var observerDisplay = new FontFaceObserver('ff-meta-web-pro-condensed');

            try {
                fontsLoaded = !!sessionStorage.getItem('fontsLoaded')
            } catch(e) {}

            if (fontsLoaded) {
                // Sync so push the class in to the array.
                // Avoids setting docEl.className more than we need to.
                classes.push(fontClass);
            }

            try {
                Typekit.load({
                    async: !fontsLoaded,
                    classes: false
                });
            } catch(e) {}

            Promise.all([
                observerBody.load(),
                observerDisplay.load()
            ]).then(function() {
                if (!fontsLoaded) {
                    // Async, so we need to add the class manually.
                    docEl.className = docEl.className + ' ' + fontClass;
                    try {
                        sessionStorage.setItem('fontsLoaded', true);
                    } catch(e) {}
                }
            });
        }

        loadFonts();

        docEl.className = docEl.className.replace('no-js', '') + classes.join(' ');
    }(Config.isModern));
</script>

{% capture head_versioned_stylesheet  %}{{ site.data.stylesheets["style.css"] }}{% endcapture %}
{% capture head_stylesheet_url  %}/public/dist/stylesheets/{{ head_versioned_stylesheet }}{% endcapture %}
<script id="script-inline-assets">
    /*! loadCSS: load a CSS file asynchronously. [c]2016 @scottjehl, Filament Group, Inc. Licensed MIT */
    (function(w){"use strict";var loadCSS=function(href,before,media){var doc=w.document;var ss=doc.createElement("link");var ref;if(before){ref=before}else{var refs=(doc.body||doc.getElementsByTagName("head")[0]).childNodes;ref=refs[refs.length-1]}var sheets=doc.styleSheets;ss.rel="stylesheet";ss.href=href;ss.media="only x";function ready(cb){if(doc.body){return cb()}setTimeout(function(){ready(cb)})}ready(function(){ref.parentNode.insertBefore(ss,before?ref:ref.nextSibling)});var onloadcssdefined=function(cb){var resolvedHref=ss.href;var i=sheets.length;while(i--){if(sheets[i].href===resolvedHref){return cb()}}setTimeout(function(){onloadcssdefined(cb)})};function loadCB(){if(ss.addEventListener){ss.removeEventListener("load",loadCB)}ss.media=media||"all"}if(ss.addEventListener){ss.addEventListener("load",loadCB)}ss.onloadcssdefined=onloadcssdefined;onloadcssdefined(loadCB);return ss};if(typeof exports!=="undefined"){exports.loadCSS=loadCSS}else{w.loadCSS=loadCSS}})(typeof global!=="undefined"?global:this);

    Object.keys(localStorage).forEach(function(key) {
        if (key.match(/^css./g)) {
            console.log(key);
            localStorage.removeItem(key);
        }
    });

    loadCSS('{{ head_stylesheet_url }}');
</script>

<script id="script-sw">
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js');
    }
</script>
<script>window.markUserTime('aft.Head')</script>
